---
import { bin } from 'd3-array'

import Page from '../components/Page.astro'
import PostCount from '../components/PostCount.astro'
import Posts from '../components/Posts.astro'
import { getBlogEntries } from '../libs/content'
import { getPageProps } from '../libs/page'

export const prerender = true

export function getStaticPaths() {
  return [
    { params: { lengthCategory: 'short' } },
    { params: { lengthCategory: 'medium' } },
    { params: { lengthCategory: 'long' } },
  ]
}

// type Props = InferGetStaticPropsType<typeof getStaticPaths>

// const { author, entries, locale } = Astro.props

var entries = await getBlogEntries(Astro.currentLocale)
console.log('hello')
const readingTimes = Astro.locals.starlightBlog.posts.map((post) => post.metrics.readingTime.minutes)
const binner = bin().thresholds(3)
const bins = binner(readingTimes)

console.log(bins)

// const pageProps = getPageProps(author.name)
---

<!-- <Page {...pageProps}>
  <PostCount>{Astro.locals.t('starlightBlog.authors.count', { count: entries.length, author: author.name })}</PostCount>
  <Posts {entries} {locale} />
</Page> -->
